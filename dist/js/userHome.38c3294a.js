(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userHome"],{9420:function(e,t,r){"use strict";r("b206")},b206:function(e,t,r){},fc51:function(e,t,r){"use strict";r.r(t);var i=r("7a23"),n=Object(i["R"])("data-v-d8ea3574");Object(i["w"])("data-v-d8ea3574");var c={key:0,id:"userHome"},a={class:"user-card g-card-container mdui-card"},s={class:"mdui-card-header"},u={class:"mdui-card-header-title"},o={class:"mdui-card-header-subtitle"},l={class:"mdui-card-media"},d={class:"mdui-card-media-covered mdui-card-media-covered-top mdui-card-media-covered-gradient"},b={class:"user-card-list mdui-list"},j=Object(i["j"])("i",{class:"mdui-list-item-avatar mdui-icon material-icons"},"local_offer",-1),m={class:"mdui-list-item-content"},f={class:"mdui-list-item-title"},p={class:"mdui-list-item-text mdui-list-item-one-line"},O={class:"mdui-card-content"},v={key:0,class:"mdui-card-actions"},g=Object(i["j"])("button",{class:"mdui-btn mdui-ripple"},"编辑个人信息",-1),h={class:"user-card-container g-card-container"},y=Object(i["j"])("div",{class:"user-card-title"},[Object(i["j"])("h1",{class:"mdui-typo-title mdui-text-color-red-900"},"歌单")],-1);Object(i["u"])();var w=n((function(e,t,r,w,k,x){var R=Object(i["B"])("router-link"),E=Object(i["B"])("Card");return e.cardList.length?(Object(i["t"])(),Object(i["f"])("div",c,[Object(i["j"])("div",a,[Object(i["j"])("div",s,[Object(i["j"])("img",{class:"mdui-card-header-avatar",src:e.avatarUrl},null,8,["src"]),Object(i["j"])("div",u,Object(i["F"])(e.userProfile["昵称"]),1),Object(i["j"])("div",o,"Lv:"+Object(i["F"])(e.userProfile["等级"]),1)]),Object(i["j"])("div",l,[Object(i["j"])("img",{src:e.backgroundUrl},null,8,["src"]),Object(i["j"])("div",d,[Object(i["j"])("ul",b,[(Object(i["t"])(!0),Object(i["f"])(i["a"],null,Object(i["z"])(e.userProfile,(function(e,t){return Object(i["t"])(),Object(i["f"])("li",{class:"mdui-list-item mdui-ripple",key:t},[j,Object(i["j"])("div",m,[Object(i["j"])("div",f,Object(i["F"])(t),1),Object(i["j"])("div",p,Object(i["F"])(e),1)])])})),128))]),Object(i["j"])("div",O,"签名："+Object(i["F"])(e.signature),1)])]),e.route.query.id?Object(i["g"])("",!0):(Object(i["t"])(),Object(i["f"])("div",v,[Object(i["j"])("button",{class:"mdui-btn mdui-ripple",onClick:t[1]||(t[1]=function(){return e.logout.apply(e,arguments)})},"登出"),Object(i["j"])("button",{class:"mdui-btn mdui-ripple",onClick:t[2]||(t[2]=function(){return e.refresh.apply(e,arguments)})},"刷新登录状态"),Object(i["j"])(R,{to:"/user/setting"},{default:n((function(){return[g]})),_:1})]))]),Object(i["j"])("div",h,[y,(Object(i["t"])(!0),Object(i["f"])(i["a"],null,Object(i["z"])(e.cardList,(function(e){return Object(i["t"])(),Object(i["f"])(E,{key:e.id,item:e},null,8,["item"])})),128))])])):Object(i["g"])("",!0)})),k=(r("b0c0"),r("96cf"),r("1da1")),x=r("6c02"),R=r("5502"),E=r("8ceb"),T=r("ff86"),U=r("79f6"),S=r("8607"),_=Object(i["k"])({name:"UserHome",components:{Card:T["a"]},setup:function(){var e=Object(x["d"])(),t=Object(R["b"])(),r="",n=Object(i["y"])({}),c=Object(i["y"])(""),a=Object(i["y"])(""),s=Object(i["y"])(""),u=Object(i["x"])([]),o=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,i,n,c,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,u.length=0,e.next=4,U["a"]["httpGET"]("GET_USER_PLAYLIST",{uid:r,limit:30,offset:t});case 4:for(i=e.sent,n=i.playlist,c=0;c<n.length;c++)u[c]={id:"/playlist?id="+n[c].id,name:n[c].name,artist:n[c].creator.nickname,picUrl:n[c].coverImgUrl};case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["a"]["httpGET"]("GET_USER_DETAIL",{uid:r});case 2:t=e.sent,c.value=t.profile.avatarUrl+"?param=50y50",a.value=t.profile.backgroundUrl+"?param=950y350",s.value=t.profile.signature,n.value={"昵称":t.profile.nickname,"等级":t.level,"注册时间":Object(S["b"])(t.createTime),"省份":t.profile.province,"城市":t.profile.city,"生日":Object(S["b"])(t.profile.birthday),"听过的歌":t.listenSongs,"是否可见":t.peopleCanSeeMyPlayRecord,"动态":t.profile.eventCount,"关注我":t.profile.followMe,"关注时间":t.profile.followTime,"被关注":t.profile.followed,"粉丝":t.profile.followeds,"关注":t.profile.newFollows},o();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var i=Object(k["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("string"!==typeof e.query.id){i.next=4;break}r=e.query.id,i.next=11;break;case 4:if(!sessionStorage.userId){i.next=8;break}r=sessionStorage.userId,i.next=11;break;case 8:return i.next=10,t.dispatch("getUserId");case 10:r=sessionStorage.userId;case 11:l();case 12:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}(),b=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["a"]["httpGET"]("GET_LOGOUT");case 2:sessionStorage.login="",sessionStorage.userId="",location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["a"]["httpGET"]("GET_LOGIN_REFRESH");case 2:t=e.sent,200===t.code&&E["a"].snackbar({message:"刷新成功",position:"right-bottom",timeout:800,onClosed:function(){location.reload()}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i["M"])((function(){return e.query.id}),(function(){"/user"===e.path&&d()}),{immediate:!0}),{userProfile:n,avatarUrl:c,backgroundUrl:a,signature:s,route:e,logout:b,cardList:u,refresh:j}}});r("9420");_.render=w,_.__scopeId="data-v-d8ea3574";t["default"]=_}}]);