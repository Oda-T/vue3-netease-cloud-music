(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["discover"],{"9b5a":function(t,e,n){},af85:function(t,e,n){"use strict";n.r(e);var i=n("7a23"),c=Object(i["j"])("span",{class:"mdui-chip-title"},"更多",-1),a=Object(i["j"])("span",{class:"mdui-chip-title"},"更多",-1),r=Object(i["j"])("span",{class:"mdui-chip-title"},"更多",-1);function l(t,e,n,l,o,s){var u=Object(i["B"])("swipe"),p=Object(i["B"])("router-link"),d=Object(i["B"])("recommend");return Object(i["t"])(),Object(i["f"])("div",null,[Object(i["j"])(u,{banners:t.banners},null,8,["banners"]),Object(i["j"])(d,{topTitle:"热门推荐",topList:t.playlistHot,cardList:t.cards,onGetid:t.getIdCallBackHot},{default:Object(i["L"])((function(){return[Object(i["j"])(p,{class:"mdui-chip",style:{float:"right",margin:"30px 10px 0px"},to:"/discover/playlist"},{default:Object(i["L"])((function(){return[c]})),_:1})]})),_:1},8,["topList","cardList","onGetid"]),Object(i["j"])(d,{topTitle:"新碟上架",topList:t.albumListHot,cardList:t.albums,onGetid:t.getIdCallBackAlbums},{default:Object(i["L"])((function(){return[Object(i["j"])(p,{class:"mdui-chip",style:{float:"right",margin:"30px 10px 0px"},to:"/album/newest"},{default:Object(i["L"])((function(){return[a]})),_:1})]})),_:1},8,["topList","cardList","onGetid"]),Object(i["j"])(d,{topTitle:"热门榜单",topList:t.topList,cardList:t.cardsTopList,activeName:"云音乐飙升榜",onGetid:t.getIdCallBackList},{default:Object(i["L"])((function(){return[Object(i["j"])(p,{class:"mdui-chip",style:{float:"right",margin:"30px 10px 0px"},to:"/discover/toplist"},{default:Object(i["L"])((function(){return[r]})),_:1})]})),_:1},8,["topList","cardList","onGetid"])])}n("c975"),n("fb6a"),n("b0c0"),n("a9e3"),n("d3b7"),n("25f0");var o=n("6c02"),s=n("5502"),u=n("8ceb"),p=n("bc3a"),d=n.n(p),b=Object(i["O"])("data-v-34c10bc4");Object(i["w"])("data-v-34c10bc4");var f={class:"c-swipe"},j={class:"c-swipe-container"},m={class:"c-swipe-pagination"},O=Object(i["j"])("i",{class:"mdui-icon material-icons"},"chevron_left",-1),h=Object(i["j"])("i",{class:"mdui-icon material-icons"},"chevron_right",-1);Object(i["u"])();var v=b((function(t,e,n,c,a,r){var l=Object(i["B"])("router-link");return Object(i["t"])(),Object(i["f"])("div",f,[Object(i["j"])("div",j,[(Object(i["t"])(!0),Object(i["f"])(i["a"],null,Object(i["z"])(t.banners,(function(e,n){return Object(i["t"])(),Object(i["f"])(l,{class:["c-swipe-link mdui-shadow-16",{"c-swipe-link-pre":n===t.preIndex,"c-swipe-link-cur":n===t.curIndex,"c-swipe-link-next":n===t.nextIndex}],key:e.id,to:e.aHref},{default:b((function(){return[Object(i["j"])("img",{class:"c-swipe-img",src:e.imgSrc,alt:e.imgSrc},null,8,["src","alt"])]})),_:2},1032,["to","class"])})),128))]),Object(i["j"])("div",m,[(Object(i["t"])(!0),Object(i["f"])(i["a"],null,Object(i["z"])(t.banners,(function(e,n){return Object(i["t"])(),Object(i["f"])("span",{class:["c-swipe-pagination-inner",{"c-swipe-pagination-inner-active":n===t.curIndex}],key:e.id,onClick:Object(i["N"])((function(e){return t.handleClickSwipe(n)}),["stop"])},null,10,["onClick"])})),128))]),Object(i["j"])("button",{class:"c-swipe-arrow-left mdui-fab mdui-color-red-900 mdui-ripple",onClick:e[1]||(e[1]=Object(i["N"])((function(e){return t.handleClickArrow(-1)}),["stop"]))},[O]),Object(i["j"])("button",{class:"c-swipe-arrow-right mdui-fab mdui-color-red-900 mdui-ripple",onClick:e[2]||(e[2]=Object(i["N"])((function(e){return t.handleClickArrow(1)}),["stop"]))},[h])])})),g=Object(i["k"])({name:"Swipe",props:{banners:Object},setup:function(t){var e=Object(i["y"])(0),n=Object(i["y"])(0),c=Object(i["y"])(0),a=0,r=0,l=function(t){return t>=a?t-a:t<0?t+a:t},o=function(t){t!==n.value&&(e.value=l(t-1),n.value=l(t),c.value=l(t+1))},s=function(){r=setInterval((function(){o(n.value+1),n.value>=a?n.value=0:n.value<0&&(n.value=a-1)}),1e4)},u=function(t){clearInterval(r),o(t),s()},p=function(t){u(l(t<0?n.value-1:n.value+1))},d=function(){clearInterval(r),e.value=l(-1),n.value=l(0),c.value=l(1),s()};return Object(i["K"])((function(){t.banners&&(a=t.banners.length,d())})),{preIndex:e,curIndex:n,nextIndex:c,handleClickSwipe:u,handleClickArrow:p}}});n("b596");g.render=v,g.__scopeId="data-v-34c10bc4";var w=g,L=n("bca1"),y=Object(i["k"])({name:"Discover",components:{Swipe:w,Recommend:L["a"]},setup:function(){var t=Object(o["d"])(),e=Object(s["b"])(),n=e.state.topListFull,c=Object(i["x"])([]),a=Object(i["x"])([]),r=[{id:"ALL",name:"全部"},{id:"ZH",name:"华语"},{id:"EA",name:"欧美"},{id:"KR",name:"韩国"},{id:"JP",name:"日本"}],l=Object(i["x"])([]),p=Object(i["x"])([]),b=Object(i["x"])([]),f=Object(i["x"])([]),j=Object(i["y"])(0),m=function(t){var e=Number(t),n="";return e>99999?(e=Math.round(e/1e4),n=e.toString()+"万"):n=t.toString(),n},O=function(t){d()({url:"http://localhost:3000/playlist/detail?id=".concat(t)}).then((function(t){if(200===t.status)for(var e=t.data.playlist.tracks,n=0;n<10;n++)f[n]={id:"/song?id="+e[n].id.toString(),name:e[n].name,artist:e[n].ar[0].name,picUrl:e[n].al.picUrl}})).catch((function(t){console.log(t)}))},h=function(){for(var t=0;t<3;t++)b[t]=e.state.topListFull[t];O(b[0].id)},v=function(e){t.push("/discover/playlist/?cat=".concat(e.name))},g=function(e){t.push("/album/new?area=".concat(e.id))},w=function(t){O(t.id)},L=function(t,e,n){return"0"==t?n.slice(n.indexOf("com/")+3):"新碟首发"===e?"/album?id="+t:"/song?id="+t};return d()({url:"http://localhost:3000/banner?type=0",method:"get"}).then((function(t){for(var e=t.data.banners,n=0,i=e.length;n<i;n++)a[n]={bgSrc:e[n].imageUrl+"?imageView&blur=40x20",imgSrc:e[n].imageUrl+"?imageView&quality=30",aHref:L(e[n].encodeId,e[n].typeTitle,e[n].url)}})).catch((function(t){console.error(t)})),d()({url:"http://localhost:3000/playlist/hot"}).then((function(t){if(200===t.status)for(var e=t.data.tags,n=0,i=e.length;n<i;n++)c.push({id:e[n].id,name:e[n].name})})).catch((function(t){console.log(t)})),d()({url:"http://localhost:3000/personalized"}).then((function(t){if(200===t.status){for(var e=t.data.result,n=0;n<7;n++)l.push({id:"/playlist?id="+e[n].id.toString(),name:e[n].name,playCount:m(e[n].playCount),copywriter:e[n].copywriter,picUrl:e[n].picUrl,type:e[n].type});return Promise.resolve()}})).then((function(){d()({url:"http://localhost:3000/personalized/djprogram"}).then((function(t){if(200===t.status)for(var e=t.data.result,n=0;n<3;n++)l.push({id:"/dj?id="+e[n].id.toString(),name:e[n].name,playCount:m(e[n].program.listenerCount),copywriter:e[n].copywriter,picUrl:e[n].picUrl,type:e[n].type})}))})).catch((function(t){console.log(t)})),d()({url:"http://localhost:3000/album/newest"}).then((function(t){if(200===t.status)for(var e=t.data.albums,n=0;n<10;n++)p.push({id:"/album?id="+e[n].id.toString(),name:e[n].name,artist:e[n].artist.name,picUrl:e[n].picUrl})})).catch((function(t){console.log(t)})),sessionStorage.topListFull?(e.state.topListFull=JSON.parse(sessionStorage.topListFull),h()):n.length?h():e.dispatch("getTopListFull").then((function(){h()})),Object(i["r"])((function(){u["a"].mutation()})),{getIdCallBackHot:v,getIdCallBackAlbums:g,getIdCallBackList:w,playlistHot:c,cards:l,albumListHot:r,albums:p,topList:b,playListId:j,cardsTopList:f,banners:a}}});y.render=l;e["default"]=y},b596:function(t,e,n){"use strict";n("9b5a")}}]);