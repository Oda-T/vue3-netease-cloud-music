(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userSetting"],{4661:function(e,t,n){},4852:function(e,t,n){"use strict";n.r(t);var i=n("7a23"),a=Object(i["R"])("data-v-53973d8a");Object(i["w"])("data-v-53973d8a");var r={id:"userSetting",class:"g-card-container"},c={class:"mdui-tab","mdui-tab":""},u=Object(i["j"])("a",{href:"#user-setting-tab1",class:"mdui-ripple"},"基本设置",-1),s=Object(i["j"])("a",{href:"#user-setting-tab2",class:"mdui-ripple"},"修改密码",-1),l={id:"user-setting-tab1",class:"mdui-p-a-2"},o={class:"user-setting-tab-container"},d={class:"mdui-textfield"},b=Object(i["j"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),j=Object(i["j"])("label",{class:"mdui-textfield-label"},"昵称",-1),p=Object(i["j"])("div",{class:"mdui-textfield-error"},"昵称不能为空",-1),m={class:"mdui-textfield"},O=Object(i["j"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),f=Object(i["j"])("label",{class:"mdui-textfield-label"},"介绍",-1),g={class:"mdui-textfield"},v=Object(i["j"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),h=Object(i["j"])("label",{class:"mdui-textfield-label"},"性别",-1),x={class:"user-setting-form"},S={class:"mdui-radio"},y=Object(i["j"])("i",{class:"mdui-radio-icon"},null,-1),w=Object(i["i"])(" 男 "),k={class:"mdui-radio"},P=Object(i["j"])("i",{class:"mdui-radio-icon"},null,-1),R=Object(i["i"])(" 女 "),E={class:"mdui-radio"},T=Object(i["j"])("i",{class:"mdui-radio-icon"},null,-1),_=Object(i["i"])(" 保密 "),U={class:"mdui-textfield"},C=Object(i["j"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),G=Object(i["j"])("label",{class:"mdui-textfield-label"},"生日",-1),I=Object(i["j"])("div",{class:"mdui-textfield-error"},"生日不能为空",-1),V=Object(i["j"])("div",{class:"mdui-textfield-helper"},"例：1970年1月1日",-1),N={class:"mdui-textfield"},D=Object(i["j"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),K=Object(i["j"])("label",{class:"mdui-textfield-label"},"省份",-1),B={class:"mdui-textfield"},q=Object(i["j"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),A=Object(i["j"])("label",{class:"mdui-textfield-label"},"城市",-1),F={id:"user-setting-tab2",class:"mdui-p-a-2"},L={class:"user-setting-tab-container"},J={class:"mdui-textfield"},z=Object(i["j"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),H=Object(i["j"])("label",{class:"mdui-textfield-label"},"输入手机号",-1),$=Object(i["j"])("div",{class:"mdui-textfield-error"},"手机号格式有误",-1),M={class:"mdui-textfield"},Z=Object(i["j"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),Q=Object(i["j"])("label",{class:"mdui-textfield-label"},"修改密码",-1),W=Object(i["j"])("div",{class:"mdui-textfield-error"},"密码至少 8 位，且包含数字大小写字母",-1),X={class:"mdui-textfield"},Y=Object(i["j"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),ee=Object(i["j"])("label",{class:"mdui-textfield-label"},"输入验证码",-1),te=Object(i["j"])("div",{class:"mdui-textfield-error"},"验证码不能为空",-1),ne={id:"user-setting-tab3",class:"mdui-p-a-2"},ie={class:"user-setting-tab-container mdui-typo"},ae=Object(i["j"])("div",{class:"mdui-typo"},[Object(i["j"])("hr")],-1),re={id:"user-setting-tab4",class:"mdui-p-a-2"};Object(i["u"])();var ce=a((function(e,t,n,a,ce,ue){return Object(i["t"])(),Object(i["f"])("div",r,[Object(i["j"])("div",c,[u,s,Object(i["j"])("a",{href:"#user-setting-tab3",class:"mdui-ripple",onClick:t[1]||(t[1]=function(){return e.getUserBinding.apply(e,arguments)})},"用户绑定信息"),Object(i["j"])("a",{href:"#user-setting-tab4",class:"mdui-ripple",onClick:t[2]||(t[2]=function(){return e.getUserRecording.apply(e,arguments)})},"用户播放记录")]),Object(i["j"])("div",l,[Object(i["j"])("div",o,[Object(i["j"])("div",d,[b,j,Object(i["P"])(Object(i["j"])("input",{class:"mdui-textfield-input",required:"",type:"text",maxlength:"30","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.userSettingName=t})},null,512),[[i["K"],e.userSettingName]]),p]),Object(i["j"])("div",m,[O,f,Object(i["P"])(Object(i["j"])("textarea",{class:"mdui-textfield-input",maxlength:"300","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.userSettingDesc=t})},null,512),[[i["K"],e.userSettingDesc]])]),Object(i["j"])("div",g,[v,h,Object(i["j"])("form",x,[Object(i["j"])("label",S,[Object(i["P"])(Object(i["j"])("input",{type:"radio",value:"1","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.userSettingSex=t})},null,512),[[i["I"],e.userSettingSex]]),y,w]),Object(i["j"])("label",k,[Object(i["P"])(Object(i["j"])("input",{type:"radio",value:"2","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.userSettingSex=t})},null,512),[[i["I"],e.userSettingSex]]),P,R]),Object(i["j"])("label",E,[Object(i["P"])(Object(i["j"])("input",{type:"radio",value:"0","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.userSettingSex=t})},null,512),[[i["I"],e.userSettingSex]]),T,_])])]),Object(i["j"])("div",U,[C,G,Object(i["P"])(Object(i["j"])("input",{class:"mdui-textfield-input",required:"",type:"text",maxlength:"30","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.userSettingBirthday=t})},null,512),[[i["K"],e.userSettingBirthday]]),I,V]),Object(i["j"])("div",N,[D,K,Object(i["P"])(Object(i["j"])("input",{class:"mdui-textfield-input",type:"text",disabled:"",maxlength:"30","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.userSettingProvince=t})},null,512),[[i["K"],e.userSettingProvince]])]),Object(i["j"])("div",B,[q,A,Object(i["P"])(Object(i["j"])("input",{class:"mdui-textfield-input",type:"text",disabled:"",maxlength:"30","onUpdate:modelValue":t[10]||(t[10]=function(t){return e.userSettingCity=t})},null,512),[[i["K"],e.userSettingCity]])]),Object(i["j"])("button",{class:"mdui-btn mdui-btn-raised mdui-ripple mdui-m-a-5 mdui-color-red-900",onClick:t[11]||(t[11]=function(){return e.save.apply(e,arguments)})},"保存")])]),Object(i["j"])("div",F,[Object(i["j"])("div",L,[Object(i["j"])("form",null,[Object(i["j"])("div",J,[z,H,Object(i["P"])(Object(i["j"])("input",{class:"mdui-textfield-input",type:"text",pattern:"^1[0-9]{10}$",required:"",autocomplete:"off",maxlength:"11","onUpdate:modelValue":t[12]||(t[12]=function(t){return e.userSettingPhone=t})},null,512),[[i["K"],e.userSettingPhone]]),$]),Object(i["j"])("div",M,[Z,Q,Object(i["P"])(Object(i["j"])("input",{class:"mdui-textfield-input",type:"password",pattern:"^.*(?=.{8,})(?=.*[a-zA-Z])(?=.*[0-9]).*$",required:"",autocomplete:"off",maxlength:"20","onUpdate:modelValue":t[13]||(t[13]=function(t){return e.userSettingPassword=t})},null,512),[[i["K"],e.userSettingPassword]]),W]),Object(i["j"])("div",X,[Y,ee,Object(i["P"])(Object(i["j"])("input",{class:"mdui-textfield-input",type:"text",maxlength:"8",required:"",autocomplete:"off","onUpdate:modelValue":t[14]||(t[14]=function(t){return e.userSettingCaptcha=t})},null,512),[[i["K"],e.userSettingCaptcha]]),te])]),Object(i["j"])("button",{class:"mdui-btn mdui-btn-raised mdui-ripple mdui-color-red-900 mdui-m-a-5",disabled:!e.canSendCaptcha,onClick:t[15]||(t[15]=function(){return e.sendCaptcha.apply(e,arguments)})},"发送验证码",8,["disabled"]),Object(i["j"])("button",{class:"mdui-btn mdui-btn-raised mdui-ripple mdui-color-red-900",disabled:!e.canSendPassword,onClick:t[16]||(t[16]=function(){return e.sendNewPassword.apply(e,arguments)})},"提交修改",8,["disabled"])])]),Object(i["j"])("div",ne,[Object(i["j"])("div",ie,[(Object(i["t"])(!0),Object(i["f"])(i["a"],null,Object(i["z"])(e.binding,(function(t){return Object(i["t"])(),Object(i["f"])("div",{key:t.id},[Object(i["j"])("p",null,Object(i["F"])(t.tokenJsonStr),1),Object(i["j"])("p",null,Object(i["F"])(t.id),1),Object(i["j"])("p",null,Object(i["F"])(e.handleTime(t.refreshTime)),1),Object(i["j"])("p",null,Object(i["F"])(t.userId),1),ae])})),128))])]),Object(i["j"])("div",re,[Object(i["j"])("div",null,Object(i["F"])(e.record),1)])])})),ue=n("3835"),se=(n("96cf"),n("1da1")),le=n("5502"),oe=n("8ceb"),de=n("79f6"),be=n("8607"),je=n("5a7b"),pe=Object(i["k"])({name:"UserSetting",setup:function(){var e="",t=Object(le["b"])(),n=Object(i["y"])(""),a=Object(i["y"])(""),r=Object(i["y"])(""),c=Object(i["y"])(""),u=Object(i["y"])(""),s=Object(i["y"])(-1),l=Object(i["y"])(""),o=Object(i["y"])(""),d=Object(i["y"])(""),b=Object(i["y"])(!1),j=Object(i["y"])(!1),p=Object(i["y"])([]),m=Object(i["y"])([]),O=function(){var t=Object(se["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de["a"]["httpGET"]("GET_USER_DETAIL",{uid:e});case 2:i=t.sent,n.value=i.profile.nickname,a.value=i.profile.signature,r.value=Object(be["b"])(i.profile.birthday),c.value=i.profile.province,u.value=i.profile.city,s.value=i.profile.gender;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var n=Object(se["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(sessionStorage.userId){n.next=3;break}return n.next=3,t.dispatch("getUserId");case 3:e=sessionStorage.userId,O();case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),g=function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpGET"]("GET_USER_UPDATE",{province:c.value,city:u.value,signature:a.value,gender:s.value,birthday:Object(be["c"])(r.value),nickname:n.value});case 2:t=e.sent,200===t.code&&!1!==t.full?oe["a"].snackbar({message:"修改成功",position:"right-bottom",timeout:800,onClosed:function(){location.reload()}}):oe["a"].snackbar({message:"修改失败",position:"right-bottom",timeout:800,onClosed:function(){location.reload()}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpGET"]("GET_CAPTCHA_SENT",{phone:l.value});case 2:t=e.sent,200===t.code?oe["a"].snackbar({message:"验证码发送成功",position:"right-bottom",timeout:1e3}):oe["a"].snackbar({message:"验证码发送失败，请稍后重试",position:"right-bottom",timeout:1e3});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpPOST"]("POST_REGISTER_CELLPHONE",{phone:l.value,password:o.value,captcha:d.value});case 2:t=e.sent,200===t.code?oe["a"].snackbar({message:"修改成功",position:"right-bottom",timeout:800,onClosed:function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpGET"]("GET_LOGOUT");case 2:sessionStorage.login="",location.reload();case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}):oe["a"].snackbar({message:"修改失败",position:"right-bottom",timeout:800,onClosed:function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpGET"]("GET_LOGOUT");case 2:sessionStorage.login="",location.reload();case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var t=Object(se["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de["a"]["httpGET"]("GET_USER_BINDING",{uid:e});case 2:n=t.sent,i=n.bindings,p.value=i;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=Object(se["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de["a"]["httpGET"]("GET_USER_RECORD",{uid:e,type:1});case 2:n=t.sent,m.value=n.weekData;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return f(),Object(i["M"])([l,o,d],(function(e){var t=Object(ue["a"])(e,3),n=t[0],i=t[1],a=t[2];b.value=je["c"].test(n),a&&(j.value=je["c"].test(n)&&je["b"].test(i))}),{immediate:!0}),Object(i["r"])((function(){oe["a"].mutation()})),{userSettingName:n,userSettingDesc:a,userSettingSex:s,userSettingBirthday:r,userSettingProvince:c,userSettingCity:u,userSettingPhone:l,userSettingPassword:o,userSettingCaptcha:d,save:g,sendCaptcha:v,sendNewPassword:h,canSendCaptcha:b,canSendPassword:j,getUserBinding:x,getUserRecording:S,binding:p,record:m,handleTime:be["b"]}}});n("7b6d");pe.render=ce,pe.__scopeId="data-v-53973d8a";t["default"]=pe},"7b6d":function(e,t,n){"use strict";n("4661")}}]);