(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["playlist"],{b887:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),r={id:"playlist"};function i(e,t,n,i,c,u){var o=Object(a["A"])("play-list"),l=Object(a["A"])("comments"),s=Object(a["A"])("pagination");return Object(a["s"])(),Object(a["e"])("div",r,[Object(a["i"])(o,{headerDetail:e.headerDetail,listDetail:e.listDetail},null,8,["headerDetail","listDetail"]),Object(a["i"])(l,{commentsDetail:e.commentsDetail},null,8,["commentsDetail"]),Object(a["i"])(s,{pageCount:e.pageCount,onPagenumber:e.pageNumber},null,8,["pageCount","onPagenumber"])])}n("a4d3"),n("e01a"),n("99af"),n("a15b"),n("b0c0"),n("a9e3"),n("96cf");var c=n("1da1"),u=n("6c02"),o=n("8ceb"),l=n("9b6e"),s=n("961b"),m=n("6407"),p=n("79f6"),b=Object(a["j"])({name:"Playlist",components:{PlayList:l["a"],Comments:s["a"],Pagination:m["a"]},setup:function(){var e=Object(u["c"])(),t=Object(a["x"])({}),n=Object(a["w"])([]),r=Object(a["x"])(0),i=Object(a["w"])([]),l=function(e){var t=new Date(e);return"".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日")},s=function(e){return e>=10?e:"0".concat(e)},m=function(e){var t=Math.floor(e/1e3);return"".concat(Math.floor(t/60),":").concat(s(Math.floor(t%60)))},b=function(e){if(1===e.length)return e[0].name;for(var t=[],n=0;n<e.length;n++)t.push(e[n].name);return t.join("/")},d=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(a){var r,i,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"]["httpGET"]("GET_PLAYLIST_DETAIL",{id:a});case 2:for(r=e.sent,i=r.playlist,c=i.tracks,t.value={name:i.name,coverImgUrl:i.coverImgUrl+"?param=264y264",description:i.description,trackCount:i.trackCount,playCount:i.playCount,shareCount:i.shareCount,commentCount:i.commentCount,subscribedCount:i.subscribedCount,updateTime:l(i.updateTime),tags:i.tags},u=0;u<c.length;u++)n[u]={name:c[u].name,id:"/song?id="+c[u].id,artist:b(c[u].ar),artistUrl:"/artist?id"+c[u].ar[0].id,imgUrl:c[u].al.picUrl+"?param=32y32",time:m(c[u].dt)};case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){var a,c,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.length=0,e.next=3,p["a"]["httpGET"]("GET_COMMENT_PLAYLIST",{id:t,limit:20,offset:n});case 3:for(a=e.sent,c=a.total,u=a.comments,r.value=Math.ceil(c/20),o=0;o<u.length;o++)i[o]={username:u[o].user.nickname,useravatar:u[o].user.avatarUrl+"?param=30y30",usertype:u[o].user.userType,content:u[o].content,likedcount:u[o].likedCount,time:l(u[o].time),replied:{username:u[o].beReplied.length?u[o].beReplied[0].user.nickname:void 0,content:u[o].beReplied.length?u[o].beReplied[0].content:void 0}};case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(t){f(Number(e.query.id),20*(t-1))};return Object(a["K"])((function(){e.query.id&&(d(Number(e.query.id)),f(Number(e.query.id),0))})),Object(a["q"])((function(){o["a"].mutation()})),{headerDetail:t,listDetail:n,commentsDetail:i,pageCount:r,pageNumber:g}}});b.render=i;t["default"]=b}}]);