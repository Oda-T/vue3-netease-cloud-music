(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["album"],{dbea:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),i={id:"album"};function r(e,t,n,r,u,o){var l=Object(a["A"])("play-list"),s=Object(a["A"])("comments"),c=Object(a["A"])("pagination");return Object(a["s"])(),Object(a["e"])("div",i,[Object(a["i"])(l,{headerDetail:e.headerDetail,listDetail:e.listDetail},null,8,["headerDetail","listDetail"]),Object(a["i"])(s,{commentsDetail:e.commentsDetail,hotCommentsDetail:e.hotCommentsDetail},null,8,["commentsDetail","hotCommentsDetail"]),Object(a["i"])(c,{pageCount:e.pageCount,onPagenumber:e.pageNumber},null,8,["pageCount","onPagenumber"])])}n("a4d3"),n("e01a"),n("b0c0"),n("a9e3"),n("96cf");var u=n("1da1"),o=n("6c02"),l=n("8ceb"),s=n("9b6e"),c=n("961b"),m=n("6407"),d=n("79f6"),p=Object(a["j"])({name:"Album",components:{PlayList:s["a"],Comments:c["a"],Pagination:m["a"]},setup:function(){var e=Object(o["d"])(),t=Object(a["x"])({}),n=Object(a["w"])([]),i=Object(a["x"])(0),r=Object(a["w"])([]),s=Object(a["w"])([]),c=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(a){var i,r,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"]["httpGET"]("GET_ALBUM",{id:a});case 2:for(i=e.sent,r=i.album,u=i.songs,t.value={name:r.name,coverImgUrl:r.picUrl+"?param=264y264",description:r.description,trackCount:r.trackCount,playCount:r.playCount,shareCount:r.info.shareCount,commentCount:r.info.commentCount,subscribedCount:r.mark,updateTime:r.publishTime,artistName:r.artist.name,artistId:r.artist.id,tags:r.tags},o=0;o<u.length;o++)n[o]={name:u[o].name,id:"/song?id="+u[o].id,artist:u[o].ar,artistUrl:"/artist?id"+u[o].ar[0].id,imgUrl:u[o].al.picUrl+"?param=32y32",time:u[o].dt};case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var n,a,u,o,l,c,m,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:0,r.length=0,e.next=4,d["a"]["httpGET"]("GET_COMMENT_ALBUM",{id:t,limit:20,offset:n});case 4:if(a=e.sent,u=a.total,o=a.comments,l=a.hotComments,i.value=Math.ceil(u/20),0===n)for(c=0;c<l.length;c++)s[c]={username:l[c].user.nickname,useravatar:l[c].user.avatarUrl+"?param=30y30",usertype:l[c].user.userType,content:l[c].content,liked:l[c].liked,likedcount:l[c].likedCount,time:l[c].time,replied:{username:l[c].beReplied.length?l[c].beReplied[0].user.nickname:void 0,content:l[c].beReplied.length?l[c].beReplied[0].content:void 0}};else s.length=0;for(m=0;m<o.length;m++)r[m]={username:o[m].user.nickname,useravatar:o[m].user.avatarUrl+"?param=30y30",usertype:o[m].user.userType,content:o[m].content,liked:o[m].liked,likedcount:o[m].likedCount,time:o[m].time,replied:{username:o[m].beReplied.length?o[m].beReplied[0].user.nickname:void 0,content:o[m].beReplied.length?o[m].beReplied[0].content:void 0}};case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(t){m(Number(e.query.id),20*(t-1))};return e.query.id&&(c(Number(e.query.id)),m(Number(e.query.id))),Object(a["q"])((function(){l["a"].mutation()})),{headerDetail:t,listDetail:n,commentsDetail:r,hotCommentsDetail:s,pageCount:i,pageNumber:p}}});p.render=r;t["default"]=p}}]);