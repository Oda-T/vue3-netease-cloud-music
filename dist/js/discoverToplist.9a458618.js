(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["discoverToplist"],{"23b4":function(t,e,a){"use strict";a.r(e);var i=a("7a23"),n={id:"discoverToplist"},r={key:0},c={key:1};function o(t,e,a,o,l,s){var u=Object(i["B"])("recommend"),d=Object(i["B"])("play-list"),p=Object(i["B"])("comments"),m=Object(i["B"])("pagination");return Object(i["t"])(),Object(i["f"])("div",n,[t.topListId?(Object(i["t"])(),Object(i["f"])("div",c,[Object(i["j"])(d,{headerDetail:t.headerDetail,listDetail:t.listDetail},null,8,["headerDetail","listDetail"]),Object(i["j"])(p,{commentsDetail:t.commentsDetail,hotCommentsDetail:t.hotCommentsDetail},null,8,["commentsDetail","hotCommentsDetail"]),Object(i["j"])(m,{pageCount:t.pageCount,onPageNumber:t.pageNumber},null,8,["pageCount","onPageNumber"])])):(Object(i["t"])(),Object(i["f"])("div",r,[Object(i["j"])(u,{topTitle:"特色音乐榜",activeName:t.specialActiveName,topList:t.specialList,cardList:t.specialCardList,onGetId:t.getIdCallBackSpecial},null,8,["activeName","topList","cardList","onGetId"]),Object(i["j"])(u,{topTitle:"全球媒体榜",activeName:t.globalActiveName,topList:t.globalList,cardList:t.globalCardList,onGetId:t.getIdCallBackGlobal},null,8,["activeName","topList","cardList","onGetId"])]))])}a("a4d3"),a("e01a"),a("b0c0"),a("a9e3"),a("d3b7"),a("25f0"),a("96cf");var l=a("1da1"),s=a("5502"),u=a("6c02"),d=a("bca1"),p=a("9b6e"),m=a("961b"),b=a("6407"),g=a("79f6"),v=Object(i["k"])({name:"discoverTopList",components:{Recommend:d["a"],PlayList:p["a"],Comments:m["a"],Pagination:b["a"]},setup:function(){var t=Object(s["b"])(),e=Object(u["d"])(),a=t.state.topListFull,n=Object(i["x"])([]),r=Object(i["x"])([]),c=Object(i["y"])("云音乐飙升榜"),o=Object(i["x"])([]),d=Object(i["x"])([]),p=Object(i["y"])("云音乐说唱榜"),m=Object(i["y"])(0),b=Object(i["x"])([]),v=Object(i["x"])([]),j=Object(i["y"])({}),f=Object(i["x"])([]),h=Object(i["y"])(0),O=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,a){var i,n,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["a"]["httpGET"]("GET_PLAYLIST_DETAIL",{id:e});case 2:for(i=t.sent,n=i.playlist,a[0]={id:"/discover/toplist?id="+n.id.toString(),name:n.name,artist:n.description,picUrl:n.coverImgUrl},r=n.tracks.length<10?n.tracks.length:10,c=0;c<r;c++)a[c+1]={id:"/song?id="+n.tracks[c].id.toString(),name:n.tracks[c].name,artist:n.tracks[c].ar[0].name,picUrl:n.tracks[c].al.picUrl};case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),k=function(){for(var e=0;e<5;e++)n[e]=t.state.topListFull[e];O(n[0].id,r)},L=function(){for(var e=5;e<35;e++)o[e-5]=t.state.topListFull[e];O(o[0].id,d)},C=function(t){c.value=t.name,O(t.id,r)},y=function(t){p.value=t.name,O(t.id,d)};a.length?(k(),L()):t.dispatch("getTopListFull").then((function(){k(),L()}));var T=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,a){var i,n,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return b.length=0,t.next=3,g["a"]["httpGET"]("GET_COMMENT_PLAYLIST",{id:e,limit:20,offset:a});case 3:for(i=t.sent,n=i.total,r=i.comments,m.value=Math.ceil(n/20),c=0;c<r.length;c++)b[c]={username:r[c].user.nickname,useravatar:r[c].user.avatarUrl,usertype:r[c].user.userType,content:r[c].content,liked:r[c].liked,likedcount:r[c].likedCount,time:r[c].time,replied:{username:r[c].beReplied.length?r[c].beReplied[0].user.nickname:void 0,content:r[c].beReplied.length?r[c].beReplied[0].content:void 0}};case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),w=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return f.length=0,t.next=3,g["a"]["httpGET"]("GET_PLAYLIST_DETAIL",{id:e});case 3:for(a=t.sent,i=a.playlist,j.value={name:i.name,coverImgUrl:i.coverImgUrl,description:i.description,trackCount:i.trackCount,playCount:i.playCount,shareCount:i.shareCount,commentCount:i.commentCount,subscribedCount:i.subscribedCount,updateTime:i.updateTime},n=0;n<i.tracks.length;n++)f[n]={name:i.tracks[n].name,id:"/song?id="+i.tracks[n].id,artist:i.tracks[n].ar,artistUrl:"/artist?id="+i.tracks[n].ar[0].id,imgUrl:i.tracks[n].al.picUrl,time:i.tracks[n].dt};case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(t){"string"===typeof e.query.id&&T(e.query.id,20*(t-1))};return Object(i["L"])((function(){"/discover/toplist"===e.path&&"string"===typeof e.query.id?(h.value=Number(e.query.id),T(e.query.id,0),w(e.query.id),window.scrollTo({top:0})):(h.value=0,window.scrollTo({top:0}))})),{specialList:n,specialCardList:r,specialActiveName:c,globalList:o,globalCardList:d,globalActiveName:p,getIdCallBackSpecial:C,getIdCallBackGlobal:y,topListId:h,commentsDetail:b,pageCount:m,pageNumber:D,listDetail:f,headerDetail:j,hotCommentsDetail:v}}});v.render=o;e["default"]=v}}]);