(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userSetting"],{"41e5":function(e,t,n){},4852:function(e,t,n){"use strict";n.r(t);var i=n("7a23"),a=Object(i["S"])("data-v-53973d8a");Object(i["y"])("data-v-53973d8a");var r={id:"userSetting",class:"g-card-container"},c={class:"mdui-tab","mdui-tab":""},u=Object(i["k"])("a",{href:"#user-setting-tab1",class:"mdui-ripple"},"基本设置",-1),s=Object(i["k"])("a",{href:"#user-setting-tab2",class:"mdui-ripple"},"修改密码",-1),l={id:"user-setting-tab1",class:"mdui-p-a-2"},o={class:"user-setting-tab-container"},d={class:"mdui-textfield"},b=Object(i["k"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),p=Object(i["k"])("label",{class:"mdui-textfield-label"},"昵称",-1),m=Object(i["k"])("div",{class:"mdui-textfield-error"},"昵称不能为空",-1),O={class:"mdui-textfield"},j=Object(i["k"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),f=Object(i["k"])("label",{class:"mdui-textfield-label"},"介绍",-1),g={class:"mdui-textfield"},k=Object(i["k"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),v=Object(i["k"])("label",{class:"mdui-textfield-label"},"性别",-1),h={class:"user-setting-form"},x={class:"mdui-radio"},S=Object(i["k"])("i",{class:"mdui-radio-icon"},null,-1),w=Object(i["j"])(" 男 "),y={class:"mdui-radio"},R=Object(i["k"])("i",{class:"mdui-radio-icon"},null,-1),T=Object(i["j"])(" 女 "),E={class:"mdui-radio"},_=Object(i["k"])("i",{class:"mdui-radio-icon"},null,-1),U=Object(i["j"])(" 保密 "),C={class:"mdui-textfield"},A=Object(i["k"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),G=Object(i["k"])("label",{class:"mdui-textfield-label"},"生日",-1),P=Object(i["k"])("div",{class:"mdui-textfield-error"},"生日不能为空",-1),L=Object(i["k"])("div",{class:"mdui-textfield-helper"},"例：1970年1月1日",-1),N={class:"mdui-textfield"},D=Object(i["k"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),Q=Object(i["k"])("label",{class:"mdui-textfield-label"},"省份",-1),V={class:"mdui-textfield"},I=Object(i["k"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),B=Object(i["k"])("label",{class:"mdui-textfield-label"},"城市",-1),H={id:"user-setting-tab2",class:"mdui-p-a-2"},J={class:"user-setting-tab-container"},q={class:"mdui-textfield"},F=Object(i["k"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),M=Object(i["k"])("label",{class:"mdui-textfield-label"},"输入手机号",-1),Y=Object(i["k"])("div",{class:"mdui-textfield-error"},"手机号格式有误",-1),$={class:"mdui-textfield"},z=Object(i["k"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),Z=Object(i["k"])("label",{class:"mdui-textfield-label"},"修改密码",-1),K=Object(i["k"])("div",{class:"mdui-textfield-error"},"密码至少 8 位，且包含数字大小写字母",-1),W={class:"mdui-textfield"},X=Object(i["k"])("i",{class:"mdui-icon material-icons"},"account_circle",-1),ee=Object(i["k"])("label",{class:"mdui-textfield-label"},"输入验证码",-1),te=Object(i["k"])("div",{class:"mdui-textfield-error"},"验证码不能为空",-1),ne={id:"user-setting-tab3",class:"mdui-p-a-2"},ie={class:"user-setting-tab-container mdui-typo"},ae=Object(i["k"])("div",{class:"mdui-typo"},[Object(i["k"])("hr")],-1),re={id:"user-setting-tab4",class:"mdui-p-a-2"};Object(i["w"])();var ce=a((function(e,t,n,a,ce,ue){return Object(i["v"])(),Object(i["g"])("div",r,[Object(i["k"])("div",c,[u,s,Object(i["k"])("a",{href:"#user-setting-tab3",class:"mdui-ripple",onClick:t[1]||(t[1]=function(){return e.getUserBinding.apply(e,arguments)})},"用户绑定信息"),Object(i["k"])("a",{href:"#user-setting-tab4",class:"mdui-ripple",onClick:t[2]||(t[2]=function(){return e.getUserRecording.apply(e,arguments)})},"用户播放记录")]),Object(i["k"])("div",l,[Object(i["k"])("div",o,[Object(i["k"])("div",d,[b,p,Object(i["Q"])(Object(i["k"])("input",{class:"mdui-textfield-input",required:"",type:"text",maxlength:"30","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.userSettingName=t})},null,512),[[i["L"],e.userSettingName]]),m]),Object(i["k"])("div",O,[j,f,Object(i["Q"])(Object(i["k"])("textarea",{class:"mdui-textfield-input",maxlength:"300","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.userSettingDesc=t})},null,512),[[i["L"],e.userSettingDesc]])]),Object(i["k"])("div",g,[k,v,Object(i["k"])("form",h,[Object(i["k"])("label",x,[Object(i["Q"])(Object(i["k"])("input",{type:"radio",value:"1","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.userSettingSex=t})},null,512),[[i["J"],e.userSettingSex]]),S,w]),Object(i["k"])("label",y,[Object(i["Q"])(Object(i["k"])("input",{type:"radio",value:"2","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.userSettingSex=t})},null,512),[[i["J"],e.userSettingSex]]),R,T]),Object(i["k"])("label",E,[Object(i["Q"])(Object(i["k"])("input",{type:"radio",value:"0","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.userSettingSex=t})},null,512),[[i["J"],e.userSettingSex]]),_,U])])]),Object(i["k"])("div",C,[A,G,Object(i["Q"])(Object(i["k"])("input",{class:"mdui-textfield-input",required:"",type:"text",maxlength:"30","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.userSettingBirthday=t})},null,512),[[i["L"],e.userSettingBirthday]]),P,L]),Object(i["k"])("div",N,[D,Q,Object(i["Q"])(Object(i["k"])("input",{class:"mdui-textfield-input",type:"text",disabled:"",maxlength:"30","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.userSettingProvince=t})},null,512),[[i["L"],e.userSettingProvince]])]),Object(i["k"])("div",V,[I,B,Object(i["Q"])(Object(i["k"])("input",{class:"mdui-textfield-input",type:"text",disabled:"",maxlength:"30","onUpdate:modelValue":t[10]||(t[10]=function(t){return e.userSettingCity=t})},null,512),[[i["L"],e.userSettingCity]])]),Object(i["k"])("button",{class:"mdui-btn mdui-btn-raised mdui-ripple mdui-m-a-5 mdui-color-red-900",onClick:t[11]||(t[11]=function(){return e.save.apply(e,arguments)})},"保存")])]),Object(i["k"])("div",H,[Object(i["k"])("div",J,[Object(i["k"])("form",null,[Object(i["k"])("div",q,[F,M,Object(i["Q"])(Object(i["k"])("input",{class:"mdui-textfield-input",type:"text",pattern:"^1[0-9]{10}$",required:"",autocomplete:"off",maxlength:"11","onUpdate:modelValue":t[12]||(t[12]=function(t){return e.userSettingPhone=t})},null,512),[[i["L"],e.userSettingPhone]]),Y]),Object(i["k"])("div",$,[z,Z,Object(i["Q"])(Object(i["k"])("input",{class:"mdui-textfield-input",type:"password",pattern:"^.*(?=.{8,})(?=.*[a-zA-Z])(?=.*[0-9]).*$",required:"",autocomplete:"off",maxlength:"20","onUpdate:modelValue":t[13]||(t[13]=function(t){return e.userSettingPassword=t})},null,512),[[i["L"],e.userSettingPassword]]),K]),Object(i["k"])("div",W,[X,ee,Object(i["Q"])(Object(i["k"])("input",{class:"mdui-textfield-input",type:"text",maxlength:"8",required:"",autocomplete:"off","onUpdate:modelValue":t[14]||(t[14]=function(t){return e.userSettingCaptcha=t})},null,512),[[i["L"],e.userSettingCaptcha]]),te])]),Object(i["k"])("button",{class:"mdui-btn mdui-btn-raised mdui-ripple mdui-color-red-900 mdui-m-a-5",disabled:!e.canSendCaptcha,onClick:t[15]||(t[15]=function(){return e.sendCaptcha.apply(e,arguments)})},"发送验证码",8,["disabled"]),Object(i["k"])("button",{class:"mdui-btn mdui-btn-raised mdui-ripple mdui-color-red-900",disabled:!e.canSendPassword,onClick:t[16]||(t[16]=function(){return e.sendNewPassword.apply(e,arguments)})},"提交修改",8,["disabled"])])]),Object(i["k"])("div",ne,[Object(i["k"])("div",ie,[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(e.binding,(function(t){return Object(i["v"])(),Object(i["g"])("div",{key:t.id},[Object(i["k"])("p",null,Object(i["H"])(t.tokenJsonStr),1),Object(i["k"])("p",null,Object(i["H"])(t.id),1),Object(i["k"])("p",null,Object(i["H"])(e.handleTime(t.refreshTime)),1),Object(i["k"])("p",null,Object(i["H"])(t.userId),1),ae])})),128))])]),Object(i["k"])("div",re,[Object(i["k"])("div",null,Object(i["H"])(e.record),1)])])})),ue=n("3835"),se=(n("96cf"),n("1da1")),le=n("5502"),oe=n("8ceb"),de=n("79f6"),be=n("8607"),pe=n("5a7b"),me=Object(i["l"])({name:"UserSetting",setup:function(){var e="",t=Object(le["b"])(),n=Object(i["A"])(""),a=Object(i["A"])(""),r=Object(i["A"])(""),c=Object(i["A"])(""),u=Object(i["A"])(""),s=Object(i["A"])(-1),l=Object(i["A"])(""),o=Object(i["A"])(""),d=Object(i["A"])(""),b=Object(i["A"])(!1),p=Object(i["A"])(!1),m=Object(i["A"])([]),O=Object(i["A"])([]),j=function(){var t=Object(se["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de["a"]["httpGET"]("GET_USER_DETAIL",{uid:e});case 2:i=t.sent,n.value=i.profile.nickname,a.value=i.profile.signature,r.value=Object(be["a"])(i.profile.birthday),c.value=i.profile.province,u.value=i.profile.city,s.value=i.profile.gender;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var n=Object(se["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(sessionStorage.userId){n.next=3;break}return n.next=3,t.dispatch("getUserId");case 3:e=sessionStorage.userId,j();case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),g=function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpGET"]("GET_USER_UPDATE",{province:c.value,city:u.value,signature:a.value,gender:s.value,birthday:Object(be["b"])(r.value),nickname:n.value});case 2:t=e.sent,200===t.code&&!1!==t.full?oe["a"].snackbar({message:"修改成功",position:"right-bottom",timeout:800,onClosed:function(){location.reload()}}):oe["a"].snackbar({message:"修改失败",position:"right-bottom",timeout:800,onClosed:function(){location.reload()}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpGET"]("GET_CAPTCHA_SENT",{phone:l.value});case 2:t=e.sent,200===t.code?oe["a"].snackbar({message:"验证码发送成功",position:"right-bottom",timeout:1e3}):oe["a"].snackbar({message:"验证码发送失败，请稍后重试",position:"right-bottom",timeout:1e3});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpPOST"]("POST_REGISTER_CELLPHONE",{phone:l.value,password:o.value,captcha:d.value});case 2:t=e.sent,200===t.code?oe["a"].snackbar({message:"修改成功",position:"right-bottom",timeout:800,onClosed:function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpGET"]("GET_LOGOUT");case 2:sessionStorage.login="",location.reload();case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}):oe["a"].snackbar({message:"修改失败",position:"right-bottom",timeout:800,onClosed:function(){var e=Object(se["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de["a"]["httpGET"]("GET_LOGOUT");case 2:sessionStorage.login="",location.reload();case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var t=Object(se["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de["a"]["httpGET"]("GET_USER_BINDING",{uid:e});case 2:n=t.sent,i=n.bindings,m.value=i;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(se["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de["a"]["httpGET"]("GET_USER_RECORD",{uid:e,type:1});case 2:n=t.sent,O.value=n.weekData;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return f(),Object(i["N"])([l,o,d],(function(e){var t=Object(ue["a"])(e,3),n=t[0],i=t[1],a=t[2];b.value=pe["c"].test(n),a&&(p.value=pe["c"].test(n)&&pe["b"].test(i))}),{immediate:!0}),Object(i["t"])((function(){oe["a"].mutation()})),{userSettingName:n,userSettingDesc:a,userSettingSex:s,userSettingBirthday:r,userSettingProvince:c,userSettingCity:u,userSettingPhone:l,userSettingPassword:o,userSettingCaptcha:d,save:g,sendCaptcha:k,sendNewPassword:v,canSendCaptcha:b,canSendPassword:p,getUserBinding:h,getUserRecording:x,binding:m,record:O,handleTime:be["a"]}}});n("7b6d");me.render=ce,me.__scopeId="data-v-53973d8a";t["default"]=me},"7b6d":function(e,t,n){"use strict";n("41e5")},8607:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));n("99af"),n("a9e3"),n("d3b7"),n("ac1f"),n("25f0"),n("1276");var i=function(e){var t=new Date(e);return"".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日")},a=function(e){var t=new Date,n=e.split("年")[0],i=e.split("年")[1].split("月")[0],a=e.split("月")[1].split("日")[0];return t.setFullYear(Number(n)),t.setMonth(Number(i)-1),t.setDate(Number(a)),t.getTime().toString()}}}]);