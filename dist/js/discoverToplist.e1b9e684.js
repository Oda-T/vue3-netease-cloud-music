(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["discoverToplist"],{"23b4":function(t,e,a){"use strict";a.r(e);var n=a("7a23"),r={id:"discoverToplist"},i={key:0},c={key:1};function o(t,e,a,o,s,l){var u=Object(n["A"])("recommend"),d=Object(n["A"])("play-list"),p=Object(n["A"])("comments"),m=Object(n["A"])("pagination");return Object(n["s"])(),Object(n["e"])("div",r,[t.topListId?(Object(n["s"])(),Object(n["e"])("div",c,[Object(n["i"])(d,{headerDetail:t.headerDetail,listDetail:t.listDetail},null,8,["headerDetail","listDetail"]),Object(n["i"])(p,{commentsDetail:t.commentsDetail},null,8,["commentsDetail"]),Object(n["i"])(m,{pageCount:t.pageCount,onPagenumber:t.pageNumber},null,8,["pageCount","onPagenumber"])])):(Object(n["s"])(),Object(n["e"])("div",i,[Object(n["i"])(u,{topTitle:"特色音乐榜",activeName:"云音乐飙升榜",topList:t.specialList,cardList:t.specialCardList,onGetid:t.getIdCallBackSpecial},null,8,["topList","cardList","onGetid"]),Object(n["i"])(u,{topTitle:"全球媒体榜",activeName:"云音乐说唱榜",topList:t.globalList,cardList:t.globalCardList,onGetid:t.getIdCallBackGlobal},null,8,["topList","cardList","onGetid"])]))])}a("a4d3"),a("e01a"),a("99af"),a("a15b"),a("b0c0"),a("a9e3"),a("d3b7"),a("25f0"),a("96cf");var s=a("1da1"),l=a("5502"),u=a("6c02"),d=a("8ceb"),p=a("bca1"),m=a("9b6e"),b=a("961b"),g=a("6407"),f=a("79f6"),v=Object(n["j"])({name:"TopList",components:{Recommend:p["a"],PlayList:m["a"],Comments:b["a"],Pagination:g["a"]},setup:function(){var t=Object(l["b"])(),e=Object(u["c"])(),a=t.state.topListFull,r=Object(n["w"])([]),i=Object(n["w"])([]),c=Object(n["w"])([]),o=Object(n["w"])([]),p=Object(n["x"])(0),m=Object(n["w"])([]),b=Object(n["x"])({}),g=Object(n["w"])([]),v=Object(n["x"])(0),h=function(t){var e=new Date(t);return"".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日")},j=function(t){if(1===t.length)return t[0].name;for(var e=[],a=0;a<t.length;a++)e.push(t[a].name);return e.join("/")},O=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"]["httpGET"]("GET_PLAYLIST_DETAIL",{id:e});case 2:for(n=t.sent,r=n.playlist,a[0]={id:"/discover/toplist?id="+r.id.toString(),name:r.name,artist:r.description,picUrl:r.coverImgUrl},i=0;i<10;i++)a[i+1]={id:"/song?id="+r.tracks[i].id.toString(),name:r.tracks[i].name,artist:r.tracks[i].ar[0].name,picUrl:r.tracks[i].al.picUrl};case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),L=function(){for(var e=0;e<5;e++)r[e]=t.state.topListFull[e];O(r[0].id,i)},k=function(){for(var e=5;e<35;e++)c[e-5]=t.state.topListFull[e];O(c[0].id,o)},C=function(t){O(t.id,i)},w=function(t){O(t.id,o)};a.length?(L(),k()):t.dispatch("getTopListFull").then((function(){L(),k()}));var y=function(t){return t>=10?t:"0".concat(t)},T=function(t){var e=Math.floor(t/1e3);return"".concat(Math.floor(e/60),":").concat(y(Math.floor(e%60)))},D=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return m.length=0,t.next=3,f["a"]["httpGET"]("GET_COMMENT_PLAYLIST",{id:e,limit:20,offset:a});case 3:for(n=t.sent,r=n.total,i=n.comments,p.value=Math.ceil(r/20),c=0;c<i.length;c++)m[c]={username:i[c].user.nickname,useravatar:i[c].user.avatarUrl+"?param=30y30",usertype:i[c].user.userType,content:i[c].content,likedcount:i[c].likedCount,time:h(i[c].time),replied:{username:i[c].beReplied.length?i[c].beReplied[0].user.nickname:void 0,content:i[c].beReplied.length?i[c].beReplied[0].content:void 0}};case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),I=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.length=0,t.next=3,f["a"]["httpGET"]("GET_PLAYLIST_DETAIL",{id:e});case 3:for(a=t.sent,n=a.playlist,b.value={name:n.name,coverImgUrl:n.coverImgUrl+"?param=264y264",description:n.description,trackCount:n.trackCount,playCount:n.playCount,shareCount:n.shareCount,commentCount:n.commentCount,subscribedCount:n.subscribedCount,updateTime:h(n.updateTime)},r=0;r<n.tracks.length;r++)g[r]={name:n.tracks[r].name,id:"/song?id="+n.tracks[r].id,artist:j(n.tracks[r].ar),artistUrl:"/artist?id"+n.tracks[r].ar[0].id,imgUrl:n.tracks[r].al.picUrl+"?param=32y32",time:T(n.tracks[r].dt)};case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(t){D(Number(e.query.id),20*(t-1))};return Object(n["K"])((function(){e.query.id?(v.value=Number(e.query.id),D(Number(e.query.id),0),I(Number(e.query.id))):v.value=0})),Object(n["q"])((function(){d["a"].mutation()})),{specialList:r,specialCardList:i,globalList:c,globalCardList:o,getIdCallBackSpecial:C,getIdCallBackGlobal:w,topListId:v,commentsDetail:m,pageCount:p,pageNumber:G,listDetail:g,headerDetail:b}}});v.render=o;e["default"]=v}}]);